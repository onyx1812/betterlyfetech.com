/*! 20201102-10-RELEASE 2020-11-02 */

!function(t){var e="${jsScope}";e.indexOf("{jsScope}")>-1&&(e="TRC"),t[e]||(t[e]={})}(window),function(t,e){t.TRC=t.TRC||{};var i=function(){return!0},n=function(i,n,r,a){var o=i+"/"+encodeURIComponent(r||t.TRC.publisherId)+"/log/3"+"/"+n;return a&&(o+="?"+e.TRCLogger.formatParams(a)),o},r=function(e,n){var r,a=new(t.XDomainRequest||t.XMLHttpRequest);return a.open(e,n),a.onload=i,a.onerror=i,a.ontimeout=i,a.onprogress=i,a.withCredentials=!0,a};t.TRC.TRCLogger=e.TRCLogger={post:function(t,i,a,o,s){var c=n(t,i,o,s),u=r("POST",c);u.setRequestHeader&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(e.TRCLogger.formatParams(a))},get:function(t,e,i,a){var o=n(t,e,a,i),s;r("GET",o).send()},formatParams:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")}}}(window,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]),function(t,e){if(e&&!e.MessageDelayer){var i=function(i){return function(n){var r=n.detail,a=n.type,o=""+r[this.groupingKeyName],s=this.delayedEventsMap[o],c=e.eventUtils.getDateNow();if(s){this.timeoutHandles[o]&&(clearTimeout(this.timeoutHandles[o]),this.timeoutHandles[o]=null);var u=[].concat(s);this.delayedEventsMap[o]=[];for(var l=0;l<u.length;l++){var f=u[l],d;i(f.config).apply(t,[f.groupingKey,f.message,r,a,c-f.queueTime])}}}},n=i(function(t){return t.successCallback}),r=i(function(t){return t.failCallback}),a=function(t,e){var i=""+t;this.timeoutHandles[i]||(this.timeoutHandles[i]=setTimeout(function(){this.timeoutHandles[i]=null;var e={};e[this.groupingKeyName]=t,r.call(this,{detail:e,type:"dt"})}.bind(this),e))};e.MessageDelayer=function(t,i,a){if(this.groupingKeyName=t,this.delayedEventsMap={},this.timeoutHandles={},e.eventUtils.safeAddEventListener(i,n.bind(this)),a)for(var o=0;o<a.length;o++)e.eventUtils.safeAddEventListener(a[o],r.bind(this))},e.MessageDelayer.prototype={constructor:e.MessageDelayer,delayMessage:function(t,i,n){var r=""+t;n.failCallback=n.failCallback||function(){},this.delayedEventsMap[r]||(this.delayedEventsMap[r]=[]),this.delayedEventsMap[r].push({groupingKey:t,message:i,config:n,queueTime:e.eventUtils.getDateNow()}),n.timeoutInMillis&&a.call(this,t,n.timeoutInMillis)}}}}(window,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]),function(t,e,i){!function(){if("function"==typeof t.CustomEvent)return!1;function i(t,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var n=e.createEvent("CustomEvent");return n.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),n}i.prototype=t.Event.prototype,t.CustomEvent=i}(),i.eventUtils=i.eventUtils||{},i.eventUtils.dispatchEvent=i.eventUtils.dispatchEvent||function(t,e){"function"==typeof CustomEvent&&document.dispatchEvent(new CustomEvent(t,{detail:e||{}}))},i.eventUtils.safeAddEventListener=i.eventUtils.safeAddEventListener||function(t,e){document.addEventListener(t,function(t){try{e.call(this,t)}catch(t){}})},i.eventUtils.getDateNow=i.eventUtils.getDateNow||function(){var t,e;if(Date.now){if("number"==typeof(t=Date.now()))return t;if("number"==typeof(e=Number(t)))return e}return(new Date).getTime()},i.sharedEvents=i.sharedEvents||{PAGE_VIEW:"TRK_TFA_PAGE_VIEW",REQUEST_ID_CREATED:"TRK_TFA_REQUEST_ID_CREATED",REQUEST_ID_CREATION_TIMEOUT:"TRK_TFA_REQUEST_ID_CREATION_TIMEOUT",REQUEST_ID_CREATION_ERROR:"TRK_TFA_REQUEST_ID_CREATION_ERROR",REQUEST_ID_CREATION_JS_ERROR:"TRK_TFA_REQUEST_ID_CREATION_JS_ERROR",INVALID_TRK_RESPONSE:"TRK_TFA_INVALID_TRK_RESPONSE"},i.publisherIdType=i.publisherIdType||{NAME:"n",ID:"i"},i.pageViewInitiator=i.pageViewInitiator||{TRK:"trk",TFA:"tfa"}}(window,document,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]),function(t,e){t._tfa=t._tfa||[],t._tfa.config||(t._tfa.TfaConfig=function(){this.configMap={}},t._tfa.TfaConfig.prototype={safeGet:function(t,e,i){var n,r,a;if(i&&this.configMap[i])n=""+i;else{if(!this.firstPublisherId)return e;n=this.firstPublisherId}try{return void 0===(a=(r=this.configMap[n])[t])?e:a}catch(t){return e}},hasValidConfig:function(){return!!this.firstPublisherId},addConfig:function(t,e){"string"==typeof e||e instanceof String||(this.firstPublisherId||(this.firstPublisherId=t),this.configMap[""+t]=e)}},t._tfa.config=new t._tfa.TfaConfig,t._taboola=t._taboola||[]),t._tfa.config.addConfig("${publisherId}","${tfa_config}")}(window,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]),function(t,e,i){"use strict";var n=i.jsScope,r={map:function(t,e){if("function"==typeof Array.prototype.map)return e.map(t);for(var i=[],n=0;n<e.length;n++)i.push(t(e[n],n,e));return i},forEach:function(t,e){if("function"==typeof Array.prototype.forEach)return e.forEach(t);for(var i=0;i<e.length;i++)t(e[i],i,e)},filter:function(t,e){if("function"==typeof Array.prototype.filter)return e.filter(t);for(var i=[],n=0;n<e.length;n++)t(e[n],n,e)&&i.push(e[n]);return i},objKeys:Object.keys||(a=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=s.length,function(t){if("function"!=typeof t&&("object"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");var e=[],i,n;for(i in t)a.call(t,i)&&e.push(i);if(o)for(n=0;n<c;n++)a.call(t,s[n])&&e.push(s[n]);return e})},a,o,s,c;i.networkMap&&"string"!=typeof i.networkMap||(i.networkMap={});var u=null,l=null,f=null,d=null,h={},g=0,p=!1,m="requestTimeoutHandle",v="requestId",S="requestStatus",I="trkRequestDone",E=5e3,T="init",b="pr",w="pud",y="tto",R="s",_="f",C="u",D=[y,_],U=[T,b,w],O=((q={})[n.publisherIdType.NAME]="name",q[n.publisherIdType.ID]="id",q),k=function(){for(var t={},e=r.objKeys(i.networkMap),a=0;a<e.length;++a){var o;t[""+i.networkMap[e[a]][O[n.publisherIdType.ID]]]=!0}return t}(),N="gk",P="dk",M="TRK_RELEASE_DELAYED_REQUESTS_EVENT",A=function(){var t={};return t[N]=P,t}(),V=new n.MessageDelayer(N,M),x=function(t,e){j=j.loadTrc(e.publisherId,e.publisherIdType,e.config,e.requestData)},L={UNINITIALIZED:{loadTrc:function(t,e,i,n){var r=_t();return et(t,e,i,n),r?L.USER_ID_SET:L.PENDING_USER_ID_SET}},PENDING_USER_ID_SET:{loadTrc:function(t,e,i,n){return n[S]=w,V.delayMessage(P,{publisherId:t,publisherIdType:e,config:i,requestData:n},{successCallback:x}),L.PENDING_USER_ID_SET}},USER_ID_SET:{loadTrc:function(t,e,i,n){return et(t,e,i,n),L.USER_ID_SET}}},j=L.UNINITIALIZED,$=(t.taboola_view_id||(t.taboola_view_id=(new Date).getTime()),t.taboola_view_id),K,q,F=function(){return!0===i.tfaContext},G=function(){try{localStorage.setItem("taboolaStorageDetection","detect"),localStorage.removeItem("taboolaStorageDetection")}catch(t){return!1}return!0},H=function(t,e,i){var n=t.split(e);return n.slice(0,i-1).concat(n.length>=i?n.slice(i-1).join(e):[])},B=function(t){if(!t)throw new Error("Invalid URL!");this.href=t;var e=H(t,"#",2);return this.hash=e.length>1?"#"+e.pop():"",t=e[0],e=H(t,"?",2),this.search=e.length>1?"?"+e.pop():"",t=e[0],e=H(t,"://",2),this.protocol=e.length>1?e.shift()+":":"",t=e[0],e=H(t,"/",2),this.pathname=e.length>1?"/"+e.pop():"/",t=e[0],e=H(t,"@",2),this.auth=e.length>1?e.shift():"",t=e[0],e=H(t,":",2),this.port=e.length>1?parseInt(e.pop()):0,this.host=e[0],this},z={"http:":1,"https:":1};B.prototype.toString=function(t){return(this.host?this.protocol+"//"+(this.auth?this.auth+"@":"")+this.host+(this.port?":"+this.port:""):"")+this.pathname+this.search+(t?"":this.hash||"")},B.prototype.switchProtocol=function(t,e){var i=this instanceof B?this:new B(this),n;return z[t]&&(e&&"https:"===i.protocol||(i.protocol=t)),(n=i.toString(!1)).length>1?n:""},B.prototype.getParameter=function(t){for(var e,i=(this instanceof B?this:new B(this)).search.substr(1).split(/&/),n=0;n<i.length;n++){var r=i[n].split(new RegExp("="),2);if(unescape(r[0])===t)return unescape(r[1])}return null};var W={states:{ABP_DETECTION_DISABLED:-2,ABP_NOT_DETECTED:0,ABP_DETECTED:1},createBlockDetectionDiv:function(t){var i=e.createElement("div");return i.className=t,i.style.fontSize="initial",i.appendChild(e.createTextNode(".")),e.documentElement.appendChild(i),i},isBlockDetectedOnDiv:function(t){return!t.offsetHeight},isBlockDetectedOnClassNames:function(t){var i,n=t.length,r;for(i=0;i<n;i++)if(t[i]){r=this.createBlockDetectionDiv(t[i]);try{if(this.isBlockDetectedOnDiv(r))return!0}catch(t){}finally{e.documentElement.removeChild(r)}}return!1},getBlockedState:function(t){return mt()||vt()?this.states.ABP_NOT_DETECTED:t&&this.isBlockDetectedOnClassNames(t)?this.states.ABP_DETECTED:this.states.ABP_NOT_DETECTED}},Q=function(t,e){for(var i=r.objKeys(t),n=0;n<i.length;n++){var a=i[n];e.push([a,t[a]])}},J=function(t){n[t.callbackName]=function(){},t.newScriptElement.parentNode.removeChild(t.newScriptElement),t.newScriptElement=null,delete t.newScriptElement},Y=function(e){J(e),e[S]=y,e.isMediaRequest||(t.TRC.trkRequestStatus=!1),j===L.PENDING_USER_ID_SET&&(j=L.UNINITIALIZED),e[I]?n.eventUtils.dispatchEvent(n.sharedEvents.INVALID_TRK_RESPONSE,{publisherId:e.publisherId}):n.eventUtils.dispatchEvent(n.sharedEvents.REQUEST_ID_CREATION_TIMEOUT,{publisherId:e.publisherId}),at()},Z=function(t,i,n,r){var a=e.getElementsByTagName("script")[0],o=e.createElement("script");return o.type="text/javascript",o.src=t,o.charset="UTF-8",n?o.setAttribute("defer","defer"):r&&o.setAttribute("async","async"),"function"==typeof i&&(o.addEventListener?(o.addEventListener("load",i,!1),o.addEventListener("error",i,!1)):o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||i.apply(o)}),a.parentNode.insertBefore(o,a),o},X=function(t,e,i){var n={publisherId:t,isMediaRequest:i.isMediaRequest,isUnifiedPageView:i.isUnifiedPageView,publisherIdType:e,callbackName:"trkCallback"+(0===g?"":g)};return n[S]=T,h[t]||(h[t]=[]),h[t].push(n),++g,n},tt=function(t){return function(){Y(t)}},et=function(e,n,r,a){var o=i.rboxTrcProtocol+"//trc.taboola.com/"+e+"/trc/3/json?"+"tim="+(new Date).getTime()+"&"+"data="+encodeURIComponent(JSON.stringify(nt(a)))+"&"+"pubit="+n,s=r.isMediaRequest?t._tfa.config.safeGet("tfa:trk:tracking-request-timeout",E,e):E;a[S]=b,a[m]=t.setTimeout(tt(a),s),a.newScriptElement=Z(o,function(){a[I]=!0})},it=function(t){return function(e){ot(t,e)}},nt=function(t){var e="${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}";return n[t.callbackName]=it(t),ft(t,e+"."+t.callbackName)},rt=function(t){var e=h[t=""+t];return e&&e.length>0?e[e.length-1]:null},at=function(){n.eventUtils.dispatchEvent(M,A)},ot=function(e,r){if(t.clearTimeout(e[m]),r&&r.trc&&(r.trc.ui?(r.trc["DNT"]&&"TRUE"===r.trc["DNT"].toUpperCase()?localStorage.removeItem("taboola global:user-id"):localStorage.setItem("taboola global:user-id",r.trc["ui"]),j=L.USER_ID_SET):j=L.UNINITIALIZED,r.trc.sd&&localStorage.setItem(e.publisherId+":session-data",r.trc["sd"]),r.trc["vl"]&&r.trc["vl"].length)){var a=r.trc["vl"][0].ri;e.isMediaRequest||(t.TRC.events_ri=a),e[v]=a,e[S]=R,n.eventUtils.dispatchEvent(n.sharedEvents.REQUEST_ID_CREATED,{publisherId:e.publisherId,requestId:a})}e[S]!==R&&(e[S]=_,n.eventUtils.dispatchEvent(n.sharedEvents.REQUEST_ID_CREATION_ERROR,{publisherId:e.publisherId})),e.isMediaRequest||(t.TRC.trkRequestStatus=!(D.indexOf(e[S])>=0)),t.TRC.alertVVResponseLoaded&&t.TRC.alertVVResponseLoaded(i.tblVersion),J(e),at()},st=function(){var t,e=function(){try{return decodeURI(top.window.document.referrer)}catch(t){}return null},i=/https?:\/\/\w+\.taboola(?:syndication)?\.com/,n=function(t){return i.test(t)?t.split("?")[0]:t.substr(0,400)},r,a=[function(){for(var t=document.head.getElementsByTagName("link"),e=0;e<t.length;e++)if("referrer"===t[e].rel)return t[e].href;return null},function(){var t=e();return t?n(t):null}],o=function(){for(var t,e=0;!t&&e<a.length;e++)t=a[e].call(this);return t};return o.innerExtractReferrerFromTopMostReferrer=n,o}(),ct=function(){var t=d;return t||(t=st()),t},ut=function(){if(K)return K;var e=400,i;return(K=t.location.search).length>e&&(i=K.substring(0,e-1),K=i.substring(0,i.lastIndexOf("&"))),K},lt=function(e,i){var n;return e.isUnifiedPageView&&(i[n=t._tfa.config.safeGet("tfa:trk:unified-page-view-param-name","supv",e.publisherId)]=!0),i.mpv=!0,i},ft=function(e,n){var r=W.getBlockedState(["banner_ad","sponsored_ad"]),a={id:~~(1e3*Math.random()),ii:gt(e),it:yt(t._taboola),sd:Rt(e.publisherId),ui:_t(),vi:$,cv:i.tblVersion,uiv:"default",u:Ct(),e:ct(),cb:n,qs:ut(),r:[{li:"rbox-tracking",s:0,uim:"rbox-tracking:pub="+i.bakedPublisherName+":abp="+r,uip:"rbox-tracking",orig_uip:"rbox-tracking"}]};return e.isMediaRequest&&(a=lt(e,a)),a},dt=function(t){for(var e=0;e<t.length;++e)for(var i=t[e],n=r.objKeys(i),a=0;a<n.length;++a){var o=n[a],s=i[o];if("unknown"!==s)switch("auto"===s&&(s=""),o){case"video":u=s;break;case"url":f=s;break;case"article":case"category":case"home":case"search":case"photo":case"other":case"content_hub":l=s;break;case"ref_url":d=s}}},ht=function(e){if(e){var i=n.trk.getPublisherRequestId(e);if(i)return i}return t.TRC.events_ri},gt=function(t){var e=null;return u||""===u?e=u:(l||""===l)&&(e=l),(""===e||t.isMediaRequest)&&(e=It("item-id",i.normalizeItemId,i.prenormalizeIdRules)),e},pt=function(t,e,i){var n;if(!i)return e;r.forEach(function(t){var i=e.search(t);i>=0&&(e=e.substr(0,i))},i["truncate-at"]||[]);for(var a=new B(e),o=r.objKeys(i),s=0;s<o.length;++s){var c=o[s];if(i[c])switch(c){case"host":delete a.host;break;case"trailing-dirsep":for(;"/"===a.pathname.substr(a.pathname.length-1);)a.pathname=a.pathname.substr(0,a.pathname.length-1);break;case"query":var u=[],l=a.search.replace(/^\?/,"").split("&");"string"==typeof(n=i[c])&&(n=new RegExp(n));var f=n instanceof Array?function(t){for(var e=0;e<n.length;e++)if(t===n[e])return!0;return!1}:n instanceof RegExp?n.test.trcBind(n):function(){return!1};l.forEach(function(t){f(decodeURIComponent(t.split("=")[0]))&&u.push(t)}),a.search=(u.length?"?":"")+u.join("&");break;case"fragment":var d=a.hash.replace(/^#/,"");"string"==typeof(n=i[c])&&(n=new RegExp(n)),a.hash="",n instanceof RegExp&&n.test(d)?a.hash="#"+d:n instanceof Array&&n.forEach(function(t){d.search(t)>=0&&(a.hash="#"+d)})}}return a.pathname||(a.pathname="/"),"item-id"===t?a.toString().toLowerCase():a.toString()},mt=function(){return St(ct(),"ampproject.net")},vt=function(){return St(ct(),"instantarticles.fb.com")},St=function(t,e){try{return void 0!==t&&void 0!==e&&t.indexOf(e)>0}catch(t){return!1}},It=function(t,e,n){var r=["paramUrl","meta","canonical","og","location"],a={paramUrl:Et,canonical:Tt,og:bt,location:wt},o=i.urlExtractOrder||r,s=0,c,l,f,d="",h=function(t,e){return pt.call(this,t,e,n)};for(o.push("location");s<o.length&&(!d||/^\s*$/.test(d));)l=o[s],d=(c=a[o[s]])?c.call(null,t,h):null,s++;return"item-url"===t&&l===Et?d:(f=l!==wt,d=e?e.call(this,d,u?"video":"text",f):d)},Et=function(t,e){return!f||"item-id"!==t&&"item-url"!==t?null:e.call(this,t,f)},Tt=function(t,i){for(var n=e.head.getElementsByTagName("link"),r=0;r<n.length;r++)if("canonical"===n[r].rel)return i.call(this,t,n[r].href);return null},bt=function(t,i){for(var n=e.head.getElementsByTagName("meta"),r=0;r<n.length;r++)if("og:url"===n[r].getAttribute("property")&&n[r].content.length>5)return i.call(this,t,n[r].content);return null},wt=function(e,i){var n=function(){var e=t.location,i=r.filter(function(t){return 0!==t.search("trc_")&&"taboola-debug"!==t},e.search.replace(/^\?/,"").split("&")).join("&");return e.origin+e.pathname+"?"+i};return i.call(this,e,n())},yt=function(t){try{var e=r.objKeys(t[0]);for(var i in e)switch(e[i]){case"home":return"home";case"category":return"category";case"text":case"article":return"text";case"search":return"search";case"photo":return"photo";case"other":return"other";case"content_hub":return"content_hub";case"video":default:return"video"}}catch(t){return"video"}},Rt=function(t){return localStorage.getItem(t+":session-data")},_t=function(){return localStorage.getItem("taboola global:user-id")},Ct=function(){return It("item-url",i.normalizeItemUrl,i.prenormalizeUrlRules)},Dt=function(t){for(var e,i=/^(.*\/libtrc\/.+\/)(?:(?:trk)|(?:tfa))\.js(?:\?(.*))?$/,n=0;n<t.length;n++)if(e=t[n].src.match(i))return e[1]},Ut=function(){for(var t=Dt(e.getElementsByTagName("script")),i=[{key:"?",index:0},{key:"://",index:1},{key:"//",index:1},{key:"/",index:0}],n=0,r=i.length,a=t,o;n<r;n++)a=(o=H(a,i[n].key,2)).length>1?o[i[n].index]:o[0];return a},Ot=function(){if(!t.TRC.AdServerManager){var e=Ut();t.TRC.VVReady=kt,Z("//"+e+"/libtrc/vv."+i.tblVersion+".js")}},kt=function(){t.TRC.adManager=new t.TRC.AdServerManager(i.vvConfig,i.tblVersion),t.TRC.adManager.startVV().then(function(){t.TRC.adManager.run()})},Nt=function(t,e){return t?t[e]:t},Pt=function(t,e,i){if(0===r.objKeys(i).length||k[""+t])return t;var n=document.createElement("a");n.href=f;var a=(n.host||location.host).toLowerCase(),o=(n.href||location.href).toLowerCase(),s=O[e],c=Nt(i[a],s),u="/",l=["m","mobile","www2","www3"],d=[],h,g,p,m,v;if(!c){for(Q(i,d),d.sort(function(t,e){return t[0].length>e[0].length?-1:t[0].length<e[0].length?1:0}),h=0,g=d.length;h<g;h++)if((p=d[h][0].toLowerCase()).indexOf(u)>0){if(o.match(p)){c=Nt(d[h][1],s);break}if(p.indexOf("www.")>-1&&o.match(p.replace("www.",""))){c=Nt(d[h][1],s);break}}else if(a.match(p)){c=Nt(d[h][1],s);break}if(!c&&a.indexOf("www.")<0){for(h=0,g=l.length;h<g&&(m=new RegExp("(https://|http://|^)"+l[h]+"."),v=a.replace(m,"www."),!(c=Nt(i[v],s)));h++);c||(c=Nt(i[v="www."+a],s))}}return c||"unknown-site-on-"+t},Mt=function(t,e,i){var n=rt(t);return n?e.call(this,n[S]):i};t.TRC=t.TRC||{},t.TRC.trk=n.trk=t.TRC.trk||{init:function(){t.TRC.utm&&!F()||(F()||p||(t.TRC._getGlobalRequestId=ht,t.TRC._getItemId=gt,t.TRC._getItemType=yt,p=!0),t.TRC.hasTrk?F()||n.trk.execute():t._tfa&&!t._tfa.config.hasValidConfig()||(n.hasTrk=!0,G()&&(n.eventUtils.safeAddEventListener(n.sharedEvents.PAGE_VIEW,function(e){try{var r=e.detail,a=r.publisherIdType,o=r.accountId,s=r.pageViewInitiator,c=r.isUnifiedPageView,u=s===n.pageViewInitiator.TFA,l,f;if(dt(t._taboola),u){if(t._tfa.config.safeGet("tfa:trk:prevent-concurrent-requests",!0,o)&&n.trk.isRequestProcessing(o))return;t._tfa.config.safeGet("tfa:trk:network-solution-enabled",!1,o)&&(o=Pt(o,a,i.networkMap))}f=X(o,a,l={pageViewInitiator:s,isMediaRequest:u,isUnifiedPageView:c}),j=j.loadTrc(o,a,l,f)}catch(e){n.eventUtils.dispatchEvent(n.sharedEvents.REQUEST_ID_CREATION_JS_ERROR,{publisherId:o})}}),F()||n.trk.execute(),i.enableVV&&Ot())))},execute:function(){var e=n.publisherIdType.NAME,r=Pt(i.bakedPublisherName,e,i.networkMap);n.eventUtils.dispatchEvent(n.sharedEvents.PAGE_VIEW,{accountId:r,publisherIdType:e,pageViewInitiator:n.pageViewInitiator.TRK}),t.TRC.publisherId=t.TRC.publisherId||r},getRequestStatus:function(t){var e=rt(t);return e?e[S]:C},isRequestProcessing:function(t){return Mt(t,function(t){return U.indexOf(t)>-1},!1)},hasRequestEnded:function(t){return Mt(t,function(t){return D.indexOf(t)>-1||!(U.indexOf(t)>-1)},!1)},getPublisherRequestId:function(t){var e=rt(t);return e&&e[S]===R?e[v]:null},getPublisherSessionData:function(t){var e=Rt(t);return e||null},getViewId:function(){return $},getReferrer:st},F()&&!t._tfa.config.safeGet("tfa:trk:enabled",!0,i.bakedPublisherId)||n.trk.init()}(window,document,{bakedPublisherId:"${publisherId}",bakedPublisherName:"${publisherName}",tblVersion:"20201102-10-RELEASE",normalizeItemId:"${normalizerFn}",prenormalizeIdRules:"${prenormalizeIdRules}",prenormalizeUrlRules:"${prenormalizeUrlRules}",normalizeItemUrl:"${normalizeItemUrl}",urlExtractOrder:"${urlExtractOrder}",networkMap:"${networkMap}",vvConfig:"${vvConfig}",enableVV:"${enableVisitValue}",rboxTrcProtocol:"https:",tfaContext:"${tfaContext}",jsScope:window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]}),function(t,e){t._tfa=t._tfa||[],e.useStorageDetection=t.TRC.useStorageDetection=t.TRC.useStorageDetection||!0,e.text=e.text||{},e.text.lsplit=e.text.lsplit||function(t,e,i){var n=t.split(e);return n.slice(0,i-1).concat(n.length>=i?n.slice(i-1).join(e):[])},e.tfaUtil=e.tfaUtil||{},e.tfaUtil.safeAddParam=e.tfaUtil.safeAddParam||function(t,e,i){var n,r;i&&e&&t&&(n=encodeURIComponent(t),r=encodeURIComponent(e),i.push(n+"="+r))},e.tfaUtil.getParameterByName=e.tfaUtil.getParameterByName||function(t,e){if(!e||!t)return null;t=t.replace(/[\[\]]/g,"\\$&");var i,n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};var i=t.TRCImpl=t.TRCImpl||{};i.global=i.global||{},t.__trcError=t.__trcError||function t(){}}(window,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]),function(t,e){var i="taboola global",n="trctestcookie";function r(){for(var t="trc_cookie_storage",i=new Object,n=document.cookie.split(/;\s+/),r=0;r<n.length;r++){var a=e.text.lsplit(n[r],"=",2),o=unescape(a[0]),s=unescape(a[1]);if(o==t){for(var c=s.split("|"),u=0;u<c.length;u++){var a=c[u].split("=");i[unescape(a[0])]=unescape(a[1])}break}}function l(){var e=new Array,n,r;for(var a in i)i.hasOwnProperty(a)&&null!=i[a]&&(e[e.length]=escape(a)+"="+escape(i[a]));n=e.length>0?1:-1,r=new Date((new Date).getTime()+365*n*864e5),document.cookie=t+"="+escape(e.join("|"))+";path=/;expires="+r.toUTCString()}return this.getValue=function(t){return i.hasOwnProperty(t)?i[t]:null},this.setValue=function(t,e){i[t]=e,l()},this.removeKey=function(t){delete i[t],l()},this}function a(t){var e=t||{};return this.getValue=function(t){return e[t]?e[t]:null},this.setValue=function(t,i){e[t]=i},this.removeKey=function(t){delete e[t]},this.getData=function(){return e},this}function o(e){return this.getValue=function(i){return t[e+"Storage"].getItem(i)},this.setValue=function(i,n){try{t[e+"Storage"].setItem(i,n)}catch(t){}},this.removeKey=function(i){try{t[e+"Storage"].removeItem(i)}catch(t){}},this}function s(e){var i=t[e+"Storage"],n=(new Date).getTime()+"",r="_taboolaStorageDetection";try{if(i.setItem(r,n),i.getItem(r)==n)return i.removeItem(r),i}catch(t){}return null}function c(i){try{if(t.localStorage instanceof Storage&&e.useStorageDetection&&s(i))return new o(i)}catch(t){return null}}var u=function o(){return this.state={},this.getLocalStorageImplementation=function(e,i){if(null!=this.state.privateStorageImpl&&"strict-w3c-storage"!=e)return this.state.privateStorageImpl;var n=t.TRCImpl?t.TRCImpl.global:{};switch(e=e||(n["local-storage-usage"]?n["local-storage-usage"]:"prefer-w3c-storage")){case"strict-w3c-storage":return c("session"===i?"session":"local");case"prefer-w3c-storage":var o=c("local");if(o)return this.state.privateStorageImpl=o;case"prefer-cookies":try{if(this.canWriteCookies())return this.state.privateStorageImpl=new r}catch(t){}default:return this.state.privateStorageImpl=new a}},this.getFirstPartyCookie=function(){if(this.state.firstPartyCookie)return this.state.firstPartyCookie;var t=this.getLocalStorageImplementation();if(t instanceof r||t instanceof a)return this.state.firstPartyCookie=t;try{if(this.canWriteCookies())return this.state.firstPartyCookie=new r}catch(t){}return this.state.firstPartyCookie=new a},this.canWriteCookies=function(){var t;return document.cookie=n+"=ok",t=-1!==document.cookie.indexOf(n),document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;",t},this.getDummyStorage=function(t){return new a(t)},this.getValue=function(t){return this.getPublisherValue(i,t)},this.storePublisherValue=function(t,e,i){var n;this.isNotAllowedToWriteValue(e,i)||(n=this.buildKeyWithPublisher(t,e),this.getLocalStorageImplementation().setValue(n,i),this.addKeyToStoredKeysList(n))},this.isNotAllowedToWriteValue=function(t,i){return null==i||void 0==i||e.doNotTrack&&!this.isAllowedKeyWhenDoNotTrack(t)},this.buildKeyWithPublisher=function(t,e){return t+":"+e},this.getPublisherValue=function(t,i){return e.doNotTrack&&!this.isAllowedKeyWhenDoNotTrack(i)?null:this.getLocalStorageImplementation().getValue(this.buildKeyWithPublisher(t,i))},this.addKeyToStoredKeysList=function(t){var e=this.getStoredKeysList();-1===e.indexOf(t)&&(e.push(t),this.setStoredKeysList(e))},this.getStoredKeysList=function(){var t=this.buildKeyWithPublisher(i,"local-storage-keys"),e=this.getLocalStorageImplementation().getValue(t),n=[];try{n=JSON.parse(e)||[]}catch(t){__trcError("Could not parse local storage keys",t)}return n},this.setStoredKeysList=function(t){var e,n;try{e=JSON.stringify(t),n=this.buildKeyWithPublisher(i,"local-storage-keys"),this.getLocalStorageImplementation().setValue(n,e)}catch(t){__trcError("Could not stringify local storage keys",t)}},this.isAllowedKeyWhenDoNotTrack=function(e){var i,n=(t.TRCImpl&&t.TRCImpl.global||{})["dnt-allowed-keys"]||["session-id","trc_css-isolation"],r;return null!==e&&void 0!==e&&(r=e.split(":")[1]||e,-1!==n.indexOf(r))},this.storeUserId=function(t){this.isNotAllowedToWriteValue("user-id",t)||this.storePublisherValue(i,"user-id",t)},this.getUserIdFirstPartyCookie=function(){return this.getFirstPartyCookie().getValue(this.buildKeyWithPublisher(i,"user-id"))},this.getSessionDataFirstPartyCookie=function(){return this.getFirstPartyCookie().getValue(this.buildKeyWithPublisher(i,"session-data"))},this.initState=function(){void 0===this.state&&(this.state={}),this.state.privateStorageImpl=null},this.initState(),this};e.tfaPageManager=e.tfaPageManager||new u,e.tfaPageManager.TABOOLA_GLOBAL_KEY=i}(window,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]),function(t,e,i){var n=i.tfaPageManager,r="https://",a="tblci",o="#"+a;function s(t,e){t&&e&&(e[t]=!0)}function c(t,e,i){for(var n={},r=0;r<arguments.length;r++)s(arguments[r],n);return Object.keys(n).length>1}i.tfaUserId={initialized:!1,userId:null,clickId:null,getUserId:function(){return this.userId},getClickId:function(){return this.clickId},getHttpsPrefix:function(){return r},sendUserIdsToTrc:function(t,e,n,r){var a,o="https:",s=[];if(c(t,e,n))return i.tfaUtil.safeAddParam("uiref",t,s),i.tfaUtil.safeAddParam("uils",e,s),i.tfaUtil.safeAddParam("uifpc",n,s),i.tfaUtil.safeAddParam("tblci",r,s),(a=new Image).src=o+"//trc.taboola.com/sg/taboola-tfa/1/um/?"+s.join("&"),a},sendUserIdToGamma:function(){if(t._tfa.config.safeGet("tfa-uid:send-uid-to-gamma",!1)&&(!t.TRCImpl||!t.TRCImpl.referrer)){var e,n=[],r=this.getUserId();if(r)return i.tfaUtil.safeAddParam("uid",r,n),i.tfaUtil.safeAddParam("src","tfa",n),(e=new Image).src=this.getHttpsPrefix()+"cds.taboola.com/?"+n.join("&"),e}},readAndStoreUserId:function(){var t=this.extractUserIdFromReferrer(),e=n.getValue("user-id"),i=n.getUserIdFirstPartyCookie();this.sendUserIdsToTrc(t,e,i,this.getClickId()),t&&(n.storeUserId(t),i&&n.getFirstPartyCookie().setValue(n.TABOOLA_GLOBAL_KEY+":"+"user-id",t)),this.userId=t||e||i},readAndStoreClickIdParam:function(){var t=this.extractClickIdFromUrl(this.getWindowLocation().toString())||this.extractClickIdFromUrl(this.getReferrer()),e=n.getValue(a);t&&n.storePublisherValue(n.TABOOLA_GLOBAL_KEY,a,t),this.clickId=t||e},extractUserIdFromReferrer:function(){var t=this.getReferrer();if(t&&t.indexOf("taboola")>-1)return i.tfaUtil.getParameterByName("ui",t)},extractClickIdFromUrl:function(t){if(t){var e=t.length>1&&-1!==t.indexOf("#")?t.substring(t.indexOf("#")):"",n;if(n=i.tfaUtil.getParameterByName(a,t))return n;if(e&&e.length>o.length&&0===e.indexOf(o))return e.substr(o.length)}},getWindowLocation:function(){return t.location},getReferrer:function(){return e.referrer},init:function(){this.initialized||(this.readAndStoreUserId(),this.readAndStoreClickIdParam(),this.sendUserIdToGamma(),this.initialized=!0)}},i.tfaUserId.init(),i.tfaUserId.CLICK_ID_KEY=a}(window,document,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]),function(t,e){var i="_tfa",n,r,a,o=6*60*60*1e3,s="eng_mt",c=27;function u(t,e,i){var n=t&&t.sessionStartTime?t.sessionStartTime+this.getSessionDuration()-e:this.getSessionDuration();n<0&&(n=0),setTimeout(function(){i(n)},n)}function l(t){return t.ver&&t.ver===this.getDataVersion()}var f=function t(){this.state={}};f.prototype={constructor:f,init:function t(i){var n=e.eventUtils.getDateNow(),r=this.getSessionDataFromStorage();if(this.getIsLocalStorageAvailable())return u.call(this,r,n,i),r&&r.sessionStartTime?this.state=r:(this.state={ver:c,sessionStartTime:n,scrollDepth:0,sessionDepth:[],timeOnSite:0,numOfTimesMetricsSent:0},this.persistMetricsData()),this},resetStorageMetricData:function t(){var i=e.tfaPageManager.getLocalStorageImplementation("strict-w3c-storage");this.state={},i.setValue(s,"")},getSessionDataFromState:function t(){return this.state},getSessionDataFromStorage:function t(){var i,n,r;if(i=e.tfaPageManager.getLocalStorageImplementation("strict-w3c-storage"),a=!!i,r=(n=i&&i.getValue(s))&&JSON.parse(n)){if(l.call(this,r)&&!this.hasSessionEnded(r))return r;this.resetStorageMetricData()}},hasSessionEnded:function t(i){var n=i?i.sessionStartTime:this.getSessionStartTime();return!n||e.eventUtils.getDateNow()-n>this.getSessionDuration()},persistMetricsData:function t(){var i=e.tfaPageManager.getLocalStorageImplementation("strict-w3c-storage"),n=this.state;i&&i.setValue(s,JSON.stringify(n))},persistSpecificMetricsData:function t(i,n){var r=e.tfaPageManager.getLocalStorageImplementation("strict-w3c-storage"),a;r&&i&&(a=this.getSessionDataFromStorage())&&(a[i]=n,r.setValue(s,JSON.stringify(a)))},updateMetricState:function t(e,i){var n=this.state;e&&(n[e]=i)},getSessionDuration:function t(){return o},getSessionStartTime:function t(){return this.state.sessionStartTime},getScrollDepth:function t(){return this.state.scrollDepth},getTimeOnSite:function t(){return this.state.timeOnSite},getNumOfTimesMetricsSent:function t(){return this.state.numOfTimesMetricsSent},getDataVersion:function(){return c},getIsLocalStorageAvailable:function(){return a}},(r=(n=t[i]=t[i]||[]).TEM=n.TEM||{}).ESU=r.ESU||new f}(window,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]),function(t,e){var i="_tfa",n;function r(t,e){this.storageUtils.updateMetricState(t,e),this.storageUtils.persistSpecificMetricsData(t,e)}var a=function t(){};a.prototype={constructor:a,init:function t(e){this.storageUtils=e||{},this.setVisibilityProperties(),this.initMetricData(this.storageUtils),this.initVisibilityListener()},initMetricData:function t(i){this.isPageHidden=document[this.hiddenProp],this.timeOnSite=i.getTimeOnSite()||0,this.lastVisibleStartTime=this.isPageHidden?0:e.eventUtils.getDateNow()},initVisibilityListener:function t(){document.addEventListener(this.visibilityChangeEventName,this.handleVisibilityChange.bind(this),!1)},setVisibilityProperties:function t(){void 0!==document.hidden?(this.hiddenProp="hidden",this.visibilityChangeEventName="visibilitychange"):void 0!==document.msHidden?(this.hiddenProp="msHidden",this.visibilityChangeEventName="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hiddenProp="webkitHidden",this.visibilityChangeEventName="webkitvisibilitychange")},calcTimeOnSite:function t(){return this.lastVisibleStartTime?this.timeOnSite+(e.eventUtils.getDateNow()-this.lastVisibleStartTime):this.timeOnSite},handleVisibilityChange:function t(){this.isPageHidden=document[this.hiddenProp],this.isPageHidden?(this.timeOnSite=this.calcTimeOnSite(),r.call(this,"timeOnSite",this.timeOnSite)):this.lastVisibleStartTime=e.eventUtils.getDateNow()},getTimeOnSite:function t(){return this.isPageHidden?this.timeOnSite:this.calcTimeOnSite()}},(n=t[i]=t[i]||[]).TEM=n.TEM||{},n.TEM.TOS=n.TEM.TOS||new a}(window,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]),function(){var t="_tfa",e,i=!1,n;function r(){return void 0==document.body||void 0==document.documentElement?0:(i=!0,Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight))}function a(t,e){this.storageUtils.updateMetricState(t,e),this.storageUtils.persistSpecificMetricsData(t,e)}function o(t,e){var i;return function(){var n=this,r=arguments;clearTimeout(i),i=setTimeout(function(){t.apply(n,r)},e)}}var s=function t(){};s.prototype={constructor:s,init:function t(e){this.storageUtils=e||{},this.maxScrollPercentage=this.storageUtils.getScrollDepth()||0,this.initEventListeners(),this.updateMeasurements(),this.calcMaxScrollPercentage()},getScrollDepth:function t(){return i||this.calcMaxScrollPercentage(),this.maxScrollPercentage},initEventListeners:function t(){window.addEventListener("resize",o(this.onResize.bind(this),100)),window.addEventListener("scroll",o(this.onScroll.bind(this),50))},onResize:function t(){this.updateMeasurements()},onScroll:function t(){this.calcMaxScrollPercentage()},updateMeasurements:function t(){this.winHeight=window.innerHeight,this.docHeight=r()},calcMaxScrollPercentage:function t(){var e=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,n;i||this.updateMeasurements(),(n=0==this.docHeight?0:Math.floor((e+this.winHeight)/this.docHeight*100))>this.maxScrollPercentage&&(this.maxScrollPercentage=n,a.call(this,"scrollDepth",this.maxScrollPercentage))}},(n=(e=window[t]=window[t]||[]).TEM=e.TEM||{}).SCD=n.SCD||new s}(),function(t,e){var i,n,r=t["_tfa"].TEM,a=function(){};a.prototype={constructor:a,init:function(t,i){this.storageUtils=t,this.refreshFromStorage(),e.eventUtils.safeAddEventListener(i,this.handleUnipPageView.bind(this))},getKey:function(){return"ssd"},setState:function(t){this.visitedUrls={};for(var e=0;e<t.length;e++)this.visitedUrls[t[e]]=!0},getState:function(){return this.visitedUrls?Object.keys(this.visitedUrls):[]},getMetric:function(){return this.getState().length},persistState:function(){var t="sessionDepth",e=this.getState();this.storageUtils.updateMetricState(t,e),this.storageUtils.persistSpecificMetricsData(t,e)},refreshFromStorage:function(){var t=this.storageUtils.getSessionDataFromStorage(),e;t||(t=this.storageUtils.getSessionDataFromState()),(e=t["sessionDepth"])||(e=[]),this.setState(e)},handleUnipPageView:function(){try{var e=t.location.href;this.visitedUrls[e]||(this.visitedUrls[e]=!0,this.persistState())}catch(t){}}},r.SSD=r.SSD||new a}(window,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]),function(t,e){var i="_tfa",n=t[i]=t[i]||[],r,a=n.TEM=n.TEM||{},o=a.ESU||{},s=a.SCD||{},c=a.SSD||{},u=a.TOS||{},l=1500,f="numOfTimesMetricsSent",d="pre_d_eng_tb",h={SESSION_END:"SESSION_END"},g,p;function m(t,e){var i=u.getTimeOnSite(),n=s.getScrollDepth(),r=c.getMetric();return{notify:"event",name:d,tos:i,scd:n,ssd:r,est:o.getSessionStartTime(),ver:o.getDataVersion(),isls:o.getIsLocalStorageAvailable(),src:t,invt:e}}function v(t,e){var i=m(t,e);i.est&&(r.pageViewAccountIds?S(r.pageViewAccountIds,i):I(i))}function S(t,e){var i=Object.keys(t);i.length>0?i.forEach(function(i){e.id=t[i],I(e)}):I(e)}function I(t){r.push(t)}function E(t){clearTimeout(p),a.sendMetrics("se",t),o.resetStorageMetricData()}function T(t){var e=o.getSessionDataFromStorage(),i,n;(isNaN(g)||g<0)&&(g=0),o.hasSessionEnded()||((n=e&&e.numOfTimesMetricsSent!==g)?(g=e.numOfTimesMetricsSent,o.updateMetricState(f,g)):(i=++g,o.updateMetricState(f,i),o.persistSpecificMetricsData(f,i),a.sendMetrics("i",t)),b())}function b(){var t=l*Math.pow(2,g);p=setTimeout(function(){T(t)},t)}function w(){g=o.getNumOfTimesMetricsSent()||0,b()}function y(){a.initialized||(r=n.TUP||{},a.initialized=!0,a.ESU.init(E),a.ESU.getIsLocalStorageAvailable()&&(u.init(o),s.init(o),c.init(o,e.sharedEvents.PAGE_VIEW),a.initIntervalTrigger()))}a.init=a.init||y,a.onSessionEndTrigger=a.onSessionEndTrigger||E,a.sendMetrics=a.sendMetrics||v,a.initIntervalTrigger=a.initIntervalTrigger||w,a.EVENTS=a.EVENTS||h}(window,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]),function(t,e,i){var n=e.tfaPageManager||{},r="_tfa",a=window[r]=window[r]||[],o={event:j,subscription:q},s=/(\S+)taboola(\S+|)\.com\/libtrc\/unip\/(\S+)\/tfa\.js(\S+|)/,c="script[src$='tfa.js']",u="//",l="page_view",f=["notify","id"],d={name:"en",url:"item-url",referrer:"ref",timestamp:"tim"},h=-1,g={protocol:"https:",host:"trc.taboola.com",httpMethod:"get",loggerEventName:"unip",logToConsole:!0},p={EMPTY_COMMAND:"EMPTY_COMMAND",MISSING_NOTIFY:"MISSING_NOTIFY",INVALID_NOTIFY:"INVALID_NOTIFY",MISSING_NAME:"MISSING_NAME",INVALID_ID:"INVALID_ID"},m={TFA_VALIDATION_ERROR:"TFA_VALIDATION_ERROR"},v=((I={})[l]=G,I),S=function(){var t={};return t[e.sharedEvents.REQUEST_ID_CREATION_TIMEOUT]="to",t[e.sharedEvents.REQUEST_ID_CREATION_ERROR]="err",t[e.sharedEvents.REQUEST_ID_CREATION_JS_ERROR]="jserr",t[e.sharedEvents.INVALID_TRK_RESPONSE]="itrkr",t}(),I;function E(){var t=B();t.initialized&&t.domAccountId&&setTimeout(function(){for(var t=B().asyncQueue;t.length;)z(t.shift())},0)}function T(){var t=b(),e;if(t&&t.src&&(e=t.src.replace(s,"$3")))return/^\d+$/.test(e)?parseInt(e,10):(Q("Value '"+e+"' is invalid for 'id' param in script source url '"+t.src+"'. Only numeric values are allowed."),h)}function b(){for(var t=document.querySelectorAll(c),e,i=0;i<t.length;i++)if((e=t[i]).src&&e.src.indexOf("/unip/")>0)return e}function w(){return e.eventUtils.getDateNow()}function y(t){t["ce"]="subscr"}function R(t){var e=n.getSessionDataFirstPartyCookie();void 0!==e&&e&&(t["sd"]=e)}function _(t){try{var i=e.tfaUserId.getUserId(),r=n.getValue("user-id");(i||r)&&(t["ui"]=i||r)}catch(e){Q("Error while trying to add user-id param, params="+JSON.stringify(t),e)}}function C(t){try{var i=e.tfaUserId.getClickId();i&&(t[e.tfaUserId.CLICK_ID_KEY]=i)}catch(e){Q("Error while trying to addClickIdParam, params="+JSON.stringify(t),e)}}function D(t){var i=B();i.referrer||(i.referrer=e.trk.getReferrer()),t[d.referrer]=i.referrer}function U(t,e){var i=d.url,n;nt($(t),e)&&(t[i]=t[i]||document.location.href)}function O(t){var e={},i=!1,n;for(var r in t[d.timestamp]=w(),t)!t.hasOwnProperty(r)||f.indexOf(r)>=0||(e[n=d.hasOwnProperty(r)?d[r]:r]=t[r],i=!0);return i&&e}function k(t,i){var n=Z(t)+u+X(t,i);N(i),P(i,t),M(i,t),_(i),C(i),D(i),V(i),U(i,t);try{e.TRCLogger[g.httpMethod](n,g.loggerEventName,i,t)}catch(e){Q("Error while trying to send to server event with id '"+t+"' and params '"+JSON.stringify(i)+"'.",e)}}function N(t){t["vi"]=e.trk.getViewId()}function P(t,i){var n=e.trk.getPublisherRequestId(i);n&&(t["ri"]=n)}function M(t,i){var n=e.trk.getPublisherSessionData(i);n&&(t["sd"]=n)}function A(t,e){t["mrir"]=e}function V(t){t["cv"]=i}function x(t,e){if(t===l)for(var i in e)if(!([d.name,d.timestamp].indexOf(i)>=0))return!0;return!1}function L(t,i){var n=B(),r;if(!e.trk.getPublisherRequestId(t)){if(e.trk.isRequestProcessing(t))return void n.messageDelayer.delayMessage(t,i,{successCallback:k,failCallback:function(t,e,i,n){var r=S[n];r||(r=n),A(e,r),k(t,e)},timeoutInMillis:Y(t)});A(i,e.trk.getRequestStatus(t))}k(t,i)}function j(t,i){var n=O(t),r=$(n),a=v[r];if(i=parseInt(i,10),!a||!a(n,i)){if(et(i)){if(it(i))return void L(i,n);e.trk.getPublisherRequestId(i)||A(n,"wffo")}else A(n,"ttd");k(i,n)}}function $(t){return t[d.name]}function K(t,e){void 0!==t["sourceurl"]&&t["sourceurl"]&&(e["surl"]=t["sourceurl"])}function q(t,e){var i=O(t);y(i),R(i),K(t,i),k(parseInt(e,10),i)}function F(t,i){var n=!1;try{n=!!e.tfaUserId.getClickId()}catch(t){}return tt(i)&&!x(l,t)&&!n}function G(t,i){var n=B(),r=!1;return i&&(r=F(t,i),n.pageViewAccountIds[i]=parseInt(i,10),e.eventUtils.dispatchEvent(e.sharedEvents.PAGE_VIEW,{accountId:i,publisherIdType:e.publisherIdType.ID,pageViewInitiator:e.pageViewInitiator.TFA,isUnifiedPageView:r})),r}function H(t){return t?t.notify?o.hasOwnProperty(t.notify)?t.name?!(t.hasOwnProperty("id")&&!/^\d+$/.test(t.id))||(W(p.INVALID_ID,t,"Value '"+t.id+"' is invalid for 'id' field in command '"+JSON.stringify(t)+"'. Only numeric values are allowed."),!1):(W(p.MISSING_NAME,t,"Mandatory 'name' field is missing in command '"+JSON.stringify(t)+"'."),!1):(W(p.INVALID_NOTIFY,t,"Value '"+t.notify+"' is invalid for 'notify' field in command '"+JSON.stringify(t)+"'."),!1):(W(p.MISSING_NOTIFY,t,"Mandatory 'notify' field is missing in command '"+JSON.stringify(t)+"'."),!1):(W(p.EMPTY_COMMAND,t,"Command is '"+t+"'."),!1)}function B(){return window&&window[r]&&window[r].TUP||{}}function z(t){var e,i;if(H(t))if(e=B(),i=t.id||e.domAccountId){if(i!==h)try{o[t.notify](t,i)}catch(e){Q("An error occurred while handling command '"+JSON.stringify(t)+"'.",e)}}else e.asyncQueue.push(t)}function W(t,i,n){var r=B();e.eventUtils.dispatchEvent(m.TFA_VALIDATION_ERROR,{accountId:r.domAccountId,errorCode:t,command:i}),Q(n)}function Q(t,e){g.logToConsole&&J(t,e)}function J(t,e){e?console.log("Taboola Pixel: "+t,e):console.log("Taboola Pixel: "+t)}function Y(t){return 500+a.config.safeGet("tfa:trk:tracking-request-timeout",5e3,t)}function Z(t){return a.config.safeGet("tfa:default-protocol",g.protocol,t)}function X(t,e){var i=$(e),n;return a.config.safeGet("tfa:event-host-map",{},t)[i]||g.host}function tt(t){return et(t)&&a.config.safeGet("tfa:trk:is-unified-page-view",!1,t)}function et(t){return a.config.safeGet("tfa:trk:enabled",!0,t)}function it(t){return a.config.safeGet("tfa:trk:wait-for-request-id",!0,t)}function nt(t,e){var i=a.config.safeGet("tfa:add-item-url:event-list",[],e);return"*"===i||i.indexOf(t)>=0}function rt(){var t=a.TUP=a.TUP||{},i=a.TEM||{};t.domAccountId=t.domAccountId||T(),t.initialized||(t.push=a.TUP.push||z,t.initialized=!0,t.asyncQueue=[],t.EVENTS=m,t.pageViewAccountIds={},t.messageDelayer=new e.MessageDelayer("publisherId",e.sharedEvents.REQUEST_ID_CREATED,[e.sharedEvents.REQUEST_ID_CREATION_JS_ERROR,e.sharedEvents.REQUEST_ID_CREATION_ERROR,e.sharedEvents.REQUEST_ID_CREATION_TIMEOUT,e.sharedEvents.INVALID_TRK_RESPONSE]),i&&i.init&&i.init()),E()}rt()}(window,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"],"20201102-10-RELEASE"),function(t,e,i){var n="_tfa",r,a={orderid:"orderid",currency:"currency",revenue:"revenue",quantity:"quantity",name:"name",attributionGroup:"attributionGroup"},o={type:"marking-type"},s="https:"+"//trc.taboola.com/{$publishreId}log/3/{$logType}?",c=/(\S+)taboola(\S+|)\.com\/libtrc\/(\S+)\/tfa\.js(\S+|)/,u="unip/",l=[],f=[],d="_tecq";function h(t){var e;switch(t.notify){case"action":e=l;break;case"mark":e=f;break;case"event":case"subscription":e=r.TUP;break;case"ecevent":r.config&&r.config.safeGet("tfa:ecomm:enabled",!1,t.id)&&(e=window[d]=window[d]||[]);break;default:return}e&&e.push(t)}function g(){return i.tfaUserId&&i.tfaUserId.getUserId()?"&ui="+encodeURIComponent(i.tfaUserId.getUserId()):""}function p(){return i.tfaUserId&&i.tfaUserId.getClickId()?"&"+i.tfaUserId.CLICK_ID_KEY+"="+encodeURIComponent(i.tfaUserId.getClickId()):""}function m(){var t,e,i=y();if(i)for(t=0,e=l.length;t<e;t++)I(S(s,{$publishreId:i?i+"/":"",$logType:"action"})+"tim="+escape(T())+"&item-url="+escape(E())+R(a,l.shift())+b()+g()+p())}function v(){var t,e,i=y();if(i)for(t=0,e=f.length;t<e;t++)I(S(s,{$publishreId:i?i+"/":"",$logType:"mark"})+"tim="+escape(T())+"&item-url="+escape(E())+R(o,f.shift())+b()+g()+p())}function S(t,e){return t.replace(/\{([^{}]*)\}/g,function(t,i){var n=e[i];return"string"==typeof n||"number"==typeof n?n:t})}function I(e){var i=new Image;i.src=e,t._tfa.config.safeGet("tfa:add-referrer-policy-when-firing-pixel",!0)&&(i.referrerPolicy="no-referrer-when-downgrade")}function E(){return t.location.href}function T(){var t=new Date,e=t.getHours(),i=t.getMinutes(),n=t.getSeconds()+t.getMilliseconds()/1e3;return(e<10?"0":"")+e+":"+(i<10?"0":"")+i+":"+(n<10?"0":"")+n.toFixed(3)}function b(){var i=t.location.search,n=e.referrer.match(/(\?\S+)$/g),r="";return r=w(i.replace(/^\?/,"").split(/&/))+(n?w(n[0].replace(/^\?/,"").split(/&/)):"")}function w(t){var e="",i,n,r="trc_";for(i=0,n=t.length;i<n;i++)0==t[i].indexOf(r)&&(e=e+"&"+t[i]);return e}function y(){var t=document.getElementsByTagName("script"),e,i,n="",r;for(e=0,i=t.length;e<i;e++)if((r=t[e].src)&&(n=r.replace(c,"$3"))!==t[e].src&&n.indexOf(u)<0)return n;return n}function R(t,e){var i,n="";for(i in t)void 0!==e[i]&&(n+="&"+t[i]+"="+e[i]);return n}function _(t){for(var e=0;e<arguments.length;e++)(t=arguments[e])instanceof Object&&h(t);return C(),arguments.length}function C(){m(),v()}function D(){for(;r.length;)_(r.shift())}function U(){(r=t[n]=t[n]||[]).registered||(r.push=_,r.registered=!0,D())}U()}(window,document,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]);